## lora 模型训练

##### 思想：是用一个或一些特定特征来替换底模中的对应元素，比如用一张特定的人脸、特定的衣服或者特定的风格，这样就可以根据需要生成不同于底模的图片。
##### 特点：不需要把数据重新训练一遍，采用的方式是向原有模型中插入新的数据处理层，避免了去修改原有的模型参数。可以方便的webui界面调用不同权重，实现多种模型效果的叠加。
##### lora训练的核心参数：repeat参数，每张图片的次数，在文件夹名字设定。
##### 重中之重：
训练集的准备和素材一定要充分，近景中景和远景，前后左右上下各种不同角度。更高清，分辨率更高的原素材。

txt的文本文档描述，正确的丰富的tag非常重要。精细准确-> 模型准确， AI自动tag不一定准确，需要人工调整补充，包括一些环境因素。

如何判断tag打的好不好，就是用自己的tag去生成图片，如果跟原图越接近，说明越好。

图片并非越多越好。

total optimization steps 总的学习步数。

图的数量 * 步数 repeat * epoch / 并行数 = 总步数 

repeat过大容易过拟合，一般实物需要更多repeat，因为细节更多。

一般loss 0.08比较合适了，但是还是建议都训练一遍，根据xyz图片去寻找最好的那一组模型。

##### 小人书连环画模型。 


##### lora模型训练工作流和小技巧

  ui式训练工具，脚本式训练工具。
  #### 工作流
  
  素材准备 -> 设参训练 -> XYZ测试 
  
  素材裁切： webui有个训练，输入原目录，输出指定大小，， RIEME网站上传图片调整范围，存储下载即可。这两个工具没法放大。
            美图秀秀等类似图片处理软件，可以做图片放大。
  如何打tag，webui tag反推批量操作。
  
  TAG：
  
    ![image](https://github.com/space-zxs/workrecord/assets/77714764/34e303a5-9670-42b9-aad2-fa12676a0f55)

    ![image](https://github.com/space-zxs/workrecord/assets/77714764/a352e71f-5abe-43f0-953a-ee850a45e343)

  ##### 设置一个loss总表 xlsx表格
  
  存储所有训练结果，变化，方便汇总总结，
  
 ###### 测试
  设置一个XYZ测试图。
  
  如何生成：
  放到sd models目录下面，
  
  或者extentions中的models。
